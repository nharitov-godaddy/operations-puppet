profile::admin::groups:
  - wmcs-roots

# prometheus-node-exporter by prod servers
# prometheus-openstack-exporter by cloud servers
prometheus_nodes:
    - cloudmetrics1003.eqiad.wmnet
    - cloudmetrics1004.eqiad.wmnet
    - prometheus1005.eqiad.wmnet
    - prometheus1006.eqiad.wmnet

contactgroups: wmcs-team-email

prometheus::haproxy_exporter::endpoint: 'http://localhost:9900/stats;csv'

profile::memcached::version: 'present'
profile::memcached::growth_factor: 1.05
profile::memcached::min_slab_size: 5
profile::memcached::extended_options:
  - 'slab_reassign'
profile::memcached::size: 2000
profile::memcached::port: 11211


profile::cloudceph::client::rbd::client_name: 'eqiad1-glance-images'
profile::cloudceph::client::rbd::pool: 'eqiad1-glance-images'
profile::cloudceph::client::rbd::enable_v2_messenger: false

profile::wmcs::backy2::cluster_name: ceph

profile::cloudceph::client::rbd::libvirt_rbd_uuid: 'ab1c8650-2983-45be-a9ea-4cdc6185155d'
profile::cloudceph::client::rbd::libvirt_rbd_cinder_uuid: '9dc683f1-f3d4-4c12-8b8f-f3ffdf36364d'

# Consider removing when systemd alerts can be sent to something other than the
# server's alert setting
profile::monitoring::monitor_systemd: false
cluster: wmcs
raid::md::timer_ensure: absent

profile::memcached::version: 'present'
profile::memcached::growth_factor: 1.05
profile::memcached::min_slab_size: 5
profile::memcached::extended_options:
  - 'slab_reassign'
profile::memcached::size: 2000
profile::memcached::port: 11211

profile::openstack::eqiad1::nova::common::is_control_node: true
profile::contacts::role_contacts: ['WMCS']

profile::cloudceph::auth::deploy::enabled: true
profile::cloudceph::auth::deploy::selected_creds:
  - eqiad1-glance-images
  - eqiad1-cinder
  - admin

profile::wmcs::services::maintain_dbusers::paws_replica_cnf_user: tools-db-replica-cnf
profile::wmcs::services::maintain_dbusers::paws_replica_cnf_root_url: https://nfs-paws.wmcloud.org/v1
profile::wmcs::services::maintain_dbusers::tools_replica_cnf_user: tools-db-replica-cnf
profile::wmcs::services::maintain_dbusers::tools_replica_cnf_root_url: https://nfs-tools.wmcloud.org/v1
profile::wmcs::services::maintain_dbusers::maintain_dbusers_primary: cloudcontrol1005.wikimedia.org
profile::wmcs::services::maintain_dbusers::mysql_variances:
  s52788: 48 # Quarry T180141
  u12903: 15 # wikiscan T227462
  s51156: 40 # petscan T255730

profile::toolforge::disable_tool::disable_tool_db_host: '185.15.56.15'

# inject these particular nameservers into VMs
profile::openstack::base::nova::fullstack::nameservers:
  - ns-recursor0.openstack.eqiad1.wikimediacloud.org
  - ns-recursor1.openstack.eqiad1.wikimediacloud.org

# TODO: in the future, this can be removed and made default to cloud-private FQDN in the profile
profile::openstack::base::galera::node::wsrep_node_name: "%{facts.fqdn}"
