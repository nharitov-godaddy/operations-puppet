profile::openstack::codfw1dev::cinder::backup::active: true
profile::openstack::codfw1dev::cinder::backup::path: /srv/cinder-backups/
profile::openstack::codfw1dev::cinder::backup::lvm::pv_units:
  - /dev/sdb5
  - /dev/sdc1
  - /dev/sda1
profile::openstack::codfw1dev::cinder::backup::lvm::vg_name: backup
profile::openstack::codfw1dev::cinder::backup::lvm::lv_name: cinder-backups
profile::openstack::codfw1dev::cinder::backup::lvm::lv_size: 80TB
profile::openstack::codfw1dev::cinder::backup::lvm::lv_format: ext4
profile::cloudceph::client::rbd::libvirt_rbd_cinder_uuid: 'f83e2286-bff1-47bf-bf6d-109c427d63c9'
profile::cloudceph::client::rbd::enable_v2_messenger: true
profile::cloudceph::auth::deploy::enabled: true
profile::cloudceph::auth::deploy::selected_creds:
- eqiad1-cinder

profile::openstack::eqiad1::keystone::enforce_policy_scope: false
profile::openstack::eqiad1::keystone::enforce_new_policy_defaults: false

# these hosts are in the eqiad1 cluster despite being in codfw. For convenience
#  the following is just a duplication of the eqiad1 backy config.
profile::cloudceph::client::rbd::client_name: 'eqiad1-compute'
profile::cloudceph::client::rbd::pool: 'eqiad1-compute'
profile::cloudceph::client::rbd::glance::pool: 'eqiad1-glance-images'
profile::cloudceph::client::rbd::enable_v2_messenger: false

# This key is shared across all the libvirt / nova / backy hosts
profile::cloudceph::client::rbd::libvirt_rbd_uuid: 'ab1c8650-2983-45be-a9ea-4cdc6185155d'
profile::cloudceph::client::rbd::cinder_client_name: "eqiad1-cinder"
profile::cloudceph::client::rbd::libvirt_rbd_cinder_uuid: '9dc683f1-f3d4-4c12-8b8f-f3ffdf36364d'

profile::cloudceph::auth::deploy::enabled: true
profile::cloudceph::auth::deploy::selected_creds:
- eqiad1-compute
- admin

# Backup things:
profile::wmcs::backy2::cluster_name: ceph
profile::monitoring::monitor_systemd: false
cluster: wmcs

profile::contacts::role_contacts: ['WMCS']

profile::cloudceph::auth::deploy::configuration:
  eqiad1-compute:
    group: root
    owner: root
    mode: "0440"
    caps:
      mon: profile rbd
      osd: profile rbd-read-only pool=eqiad1-glance-images, profile rbd pool=eqiad1-compute
  admin:
    caps:
      mds: allow *
      mgr: allow *
      mon: allow *
      osd: allow *
