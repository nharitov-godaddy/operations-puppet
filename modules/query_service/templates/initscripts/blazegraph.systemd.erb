<%#- SPDX-License-Identifier: Apache-2.0 -%>
[Unit]
Description=Query Service - Blazegraph - <%= @title %>

[Service]
Type=simple
WorkingDirectory=<%= @package_dir %>
ExecStart=/usr/bin/java <%= @blazegraph_args.join(" \\\n    ") %>

User=<%= @username %>
StandardOutput=journal+console
Restart=always
SyslogIdentifier=%N

TasksMax=10000

PrivateDevices=yes
ProtectSystem=full
ProtectHome=yes
NoNewPrivileges=yes
RestrictAddressFamilies=AF_UNIX AF_INET AF_INET6

ReadOnlyDirectories=/
# data storage
ReadWriteDirectories=<%= @data_dir %>
# logs
ReadWriteDirectories=<%= @log_dir %>
# already protected by PrivateTmp
ReadWriteDirectories=/tmp /var/tmp

[Install]
